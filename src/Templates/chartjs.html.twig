{% if customer_orders is not empty %}
<script type="text/javascript">
$(document).ready(function() {
    Array.prototype.max = function() {
        return Math.max.apply(null, this);
    };
    var rawData = {{ customer_orders|json_encode|raw }};
    console.log(rawData);
    var orders = [];
    var customers = [];
    for (var j=0; j < rawData.length; j++) {
        orders.push(+(rawData[j])['quantity']);
        customers.push((rawData[j])['name']);
    }
    var ctx = document.getElementById('chartCanvas');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data:  {
          labels: customers,
          datasets: [{
              label: "Orders",
              data: orders,
              backgroundColor: 'rgba(75, 192, 192, 0.6)'
          }],
        },
        options : {
            responsive: true,
            scales: {
                yAxes: [{
                  ticks: {
                      max: (orders.max() + 2),
                      min: 0,
                      stepSize: 1
                  }
              }]
          }
        }
    });
});
</script>
{% endif %}

<script type="text/javascript" src="/js/chart.js"></script>
